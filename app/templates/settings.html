<!DOCTYPE html>
<html lang="{{ lang_code | default('en') }}">
<head>
    <meta charset="UTF-8">
    <title>{{ i18n.settings_title | default('MQTT Settings') }}</title>
    <style>
        /* ... styles ... */
    </style>
</head>
<body>
    <nav id="nav-bar"></nav>
    <div class="container">
        <h1>{{ i18n.settings_title | default('MQTT Configuration') }}</h1>
        <p>{{ i18n.settings_desc | default('Configure your MQTT Broker connection.') }}</p>
        <div id="main-content">
            <form id="mqttForm">
                <div class="form-grid">
                    <div>
                        <h3>{{ i18n.settings_broker_title | default('Broker Connection') }}</h3>
                        <label for="mqttHost">{{ i18n.settings_host_label | default('Host:') }}</label><br>
                        <input type="text" id="mqttHost"><br>
                        <label for="mqttPort">{{ i18n.settings_port_label | default('Port:') }}</label><br>
                        <input type="number" id="mqttPort"><br>
                        <label for="mqttUser">{{ i18n.settings_user_label | default('Username:') }}</label><br>
                        <input type="text" id="mqttUser"><br>
                        <label for="mqttPass">{{ i18n.settings_pass_label | default('Password:') }}</label><br>
                        <input type="password" id="mqttPass"><br>
                    </div>
                    <div>
                        <h3>{{ i18n.settings_topics_title | default('Topics') }}</h3>
                        <label for="mqttSub">{{ i18n.settings_sub_label | default('Subscribe Topic:') }}</label><br>
                        <input type="text" id="mqttSub"><br>
                        <label for="mqttPub">{{ i18n.settings_pub_label | default('Default Publish Topic:') }}</label><br>
                        <input type="text" id="mqttPub"><br>
                        <!-- This part is tricky to default, but the JS populates it anyway -->
                        <label for="mqttTopic_arrival">Arrival Publish Topic:</label><br>
                        <input type="text" id="mqttTopic_arrival"><br>
                        <label for="mqttTopic_status">Status Publish Topic:</label><br>
                        <input type="text" id="mqttTopic_status"><br>
                        <label for="mqttTopic_exception">Exception Publish Topic:</label><br>
                        <input type="text" id="mqttTopic_exception"><br>
                        <label for="mqttTopic_control">Control Publish Topic:</label><br>
                        <input type="text" id="mqttTopic_control"><br>
                    </div>
                </div>
                <br>
                <button type="submit">{{ i18n.settings_apply_button | default('Apply Configuration') }}</button>
            </form>
            <div id="response-message"></div>
        </div>
    </div>

    <script>
        const i18n = {{ i18n | tojson }};
        const langCode = '{{ lang_code | default('en') }}';
        // ... (rest of script)
    </script>
</body>
</html>
